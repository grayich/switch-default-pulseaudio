#!/bin/bash
#–ü–µ—Ä–µ–∫–ª—é—á–∞–ª–∫–∞ –∑–≤—É–∫–æ–≤–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ pipewire pulseaudio
#–ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –ø–æ –∫—Ä—É–≥—É, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–≤—É—Ö –∏ –±–æ–ª–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
#
#v0.1 ¬§ 2022@grayich
#WTFPL

#–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
def_sink=$(pactl info | grep 'Default Sink' | cut -d' ' -f 3)

#–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ –º–∞—Å—Å–∏–≤
list=( $(pactl list short sinks|awk '{print $2}') )

(( ${#list[@]} < 2 )) && exit 0 #–µ—Å–ª–∏ –≤ —Å–ø–∏—Å–∫–µ –º–µ–Ω—å—à–µ 2 —É—Å—Ç—Ä–æ–π—Å—Ç–≤, —Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å

#–£–∑–Ω–∞—Ç—å –º–µ—Å—Ç–æ –≤ –º–∞—Å—Å–∏–≤–µ —Ç–µ–∫—É—â–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
for num in ${!list[@]}; do
	elem=${list[num]}
	[[ "$elem" == "$def_sink" ]] && break
done

if (( ${#list[@]} == ($num+1) )); then #–µ—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤ —Å–ø–∏—Å–∫–µ, —Ç–æ –≤–∫–ª—é—á–∏—Ç—å –ø–µ—Ä–≤–æ–µ
	pactl set-default-sink ${list[0]}
	name=$(echo ${list[0]}|sed 's/.*\.//'|tr '[:lower:]' '[:upper:]')
	notify-send "üîà" "<b>$name</b>" -i cs-sound -t 3000
else #–∏–Ω–∞—á–µ —Å–ª–µ–¥—É—é—â–µ–µ –ø–æ —Å–ø–∏—Å–∫—É
	pactl set-default-sink ${list[$num+1]}
	name=$(echo ${list[$num+1]}|sed 's/.*\.//'|tr '[:lower:]' '[:upper:]')
	notify-send "üîà" "<b>$name</b>" -i cs-sound -t 3000
fi

exit 0

